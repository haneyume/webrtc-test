(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t){},128:function(e,t,n){"use strict";n.r(t);var a=n(133),r=n(36),c=n(37),i=n(43),s=n(38),o=n(44),u=n(1),p=n.n(u),l=n(18),d=n(10),f=n.n(d),m=n(28),h=n(132),v=n(68),w=n.n(v)()("https://vvk954yznl.sse.codesandbox.io/"),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).start=function(){n.pc=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),n.pc.onicecandidate=function(e){e.candidate&&n.sendData({candidate:e.candidate})},n.pc.onaddstream=function(e){n.remoteVideo.current.srcObject=e.stream},navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(e){n.localVideo.current.srcObject=e,n.pc.addStream(e)})},n.call=Object(m.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.pc.createOffer();case 2:return t=e.sent,e.next=5,n.pc.setLocalDescription(t);case 5:n.sendData({sdp:n.pc.localDescription});case 6:case"end":return e.stop()}},e,this)})),n.hangup=Object(m.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.pc.close(),n.pc=null,n.start();case 3:case"end":return e.stop()}},e,this)})),n.sendData=function(){var e=Object(m.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.emit("x",JSON.stringify(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=Object(m.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.candidate){e.next=4;break}n.pc.addIceCandidate(new RTCIceCandidate(t.candidate)),e.next=15;break;case 4:if("offer"!==t.sdp.type){e.next=14;break}return n.pc.setRemoteDescription(new RTCSessionDescription(t.sdp)),e.next=8,n.pc.createAnswer();case 8:return a=e.sent,e.next=11,n.pc.setLocalDescription(a);case 11:n.sendData({sdp:n.pc.localDescription}),e.next=15;break;case 14:"answer"===t.sdp.type&&n.pc.setRemoteDescription(new RTCSessionDescription(t.sdp));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.localVideo=p.a.createRef(),n.remoteVideo=p.a.createRef(),n.pc=null,n}return Object(o.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.on("x",function(t){return e.receiveData(JSON.parse(t))}),this.start()}},{key:"render",value:function(){return p.a.createElement(u.Fragment,null,p.a.createElement(l.a,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",margin:10}},p.a.createElement(h.a,{title:"Call",onPress:this.call}),p.a.createElement(l.a,{style:{width:10}}),p.a.createElement(h.a,{title:"Hangup",onPress:this.hangup})),p.a.createElement(l.a,{style:{justifyContent:"center",alignItems:"center"}},p.a.createElement("video",{ref:this.localVideo,width:"300",autoPlay:!0,muted:!0}),p.a.createElement("video",{ref:this.remoteVideo,width:"300",autoPlay:!0})))}}]),t}(u.Component),y=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return p.a.createElement(l.a,{style:{flex:1,justifyContent:"center",alignItems:"center"}},p.a.createElement(b,null))}}]),t}(u.Component);a.a.registerComponent("app",function(){return y}),a.a.runApplication("app",{rootTag:document.getElementById("root")})},84:function(e,t,n){e.exports=n(128)}},[[84,1,2]]]);
//# sourceMappingURL=main.1e714730.chunk.js.map