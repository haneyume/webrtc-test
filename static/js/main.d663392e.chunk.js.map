{"version":3,"sources":["pages/Home.js","utils/sockets.js","pages/P1.js","pages/P2.js","pages/WebRTCView.js","index.js"],"names":["Home","react_default","a","createElement","socket","io","_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","initialize","asyncToGenerator","regenerator_default","mark","_callee","mediaConstraints","pcConfiguration","stream","wrap","_context","prev","next","on","data","receiveData","JSON","parse","audio","video","width","height","iceServers","urls","navigator","mediaDevices","getUserMedia","sent","localVideo","current","srcObject","pc","RTCPeerConnection","addStream","onicecandidate","event","candidate","sendData","onaddstream","console","log","oniceconnectionstatechange","iceConnectionState","stop","uninitialize","_callee2","_context2","off","_ref3","_callee3","_context3","emit","stringify","_x","apply","arguments","_ref4","_callee4","answer","_context4","undefined","addIceCandidate","setRemoteDescription","createAnswer","setLocalDescription","_x2","React","createRef","ref","autoPlay","muted","Component","faceapi","window","remoteVideo","addEventListener","detectFace","offer","createOffer","_ref5","_callee5","_context5","_callee7","_canvas","_video","_ctx","_context7","canvas","getContext","setInterval","_ref7","_callee6","detections","_context6","detectAllFaces","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","clearRect","drawImage","draw","drawDetections","drawFaceLandmarks","drawFaceExpressions","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","Container","Row","Button","color","onClick","hangup","close","_ref6","ReactDOM","render","react_router_dom","react_router","path","exact","component","P1","P2","WebRTCView","document","getElementById"],"mappings":"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","file":"static/js/main.d663392e.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default () => {\r\n  return (\r\n    <p>WebRTC</p>\r\n  );\r\n};\r\n","import io from 'socket.io-client';\r\n\r\nconst socket = io('https://vvk954yznl.sse.codesandbox.io/');\r\n\r\nexport { socket };\r\n","import React from 'react';\r\nimport { socket } from '../utils/sockets';\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.localVideo = React.createRef();\r\n    this.pc = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initialize();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.uninitialize();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <video ref={this.localVideo} width='320' height='240' autoPlay muted />\r\n    );\r\n  }\r\n\r\n  initialize = async () => {\r\n    socket.on('webrtc', (data) => this.receiveData(JSON.parse(data)));\r\n\r\n    const mediaConstraints = {\r\n      'audio': false,\r\n      'video': {\r\n        'width': 640,\r\n        'height': 480\r\n      }\r\n    };\r\n\r\n    const pcConfiguration = {\r\n      'iceServers': [\r\n        { 'urls': 'stun:stun.l.google.com:19302' }\r\n      ]\r\n    };\r\n\r\n    const stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\r\n\r\n    this.localVideo.current.srcObject = stream;\r\n\r\n    this.pc = new RTCPeerConnection(pcConfiguration);\r\n\r\n    this.pc.addStream(stream);\r\n\r\n    this.pc.onicecandidate = (event) => {\r\n      if (event.candidate) {\r\n        this.sendData(event.candidate);\r\n      }\r\n    };\r\n\r\n    this.pc.onaddstream = (event) => {\r\n      console.log(event.stream);\r\n    };\r\n\r\n    this.pc.oniceconnectionstatechange = () => {\r\n      console.log(this.pc ? this.pc.iceConnectionState : '...');\r\n    };\r\n  };\r\n\r\n  uninitialize = async () => {\r\n    socket.off('webrtc');\r\n  };\r\n\r\n  sendData = async (data) => {\r\n    socket.emit('webrtc', JSON.stringify(data));\r\n  };\r\n\r\n  receiveData = async (data) => {\r\n    if (data['type'] === undefined) {\r\n      await this.pc.addIceCandidate(data);\r\n    }\r\n    else if (data['type'] === 'offer') {\r\n      await this.pc.setRemoteDescription(data);\r\n\r\n      const answer = await this.pc.createAnswer();\r\n\r\n      await this.pc.setLocalDescription(answer);\r\n\r\n      this.sendData(answer);\r\n    }\r\n    else if (data['type'] === 'answer') {\r\n      await this.pc.setRemoteDescription(data);\r\n    }\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Container, Row, Button } from 'reactstrap';\r\nimport { socket } from '../utils/sockets';\r\n\r\nconst faceapi = window.faceapi;\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.localVideo = React.createRef();\r\n    this.remoteVideo = React.createRef();\r\n    this.pc = null;\r\n\r\n    this.canvas = React.createRef();\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await Promise.all([\r\n      faceapi.nets.tinyFaceDetector.loadFromUri('/models'),\r\n      faceapi.nets.faceLandmark68Net.loadFromUri('/models'),\r\n      faceapi.nets.faceRecognitionNet.loadFromUri('/models'),\r\n      faceapi.nets.faceExpressionNet.loadFromUri('/models')\r\n    ]);\r\n\r\n    await this.initialize();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.uninitialize();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Container>\r\n        <Row>\r\n          <Button color='success' onClick={this.call}>Start</Button>\r\n        </Row>\r\n\r\n        <Row>\r\n          <canvas ref={this.canvas} width='640' height='480' />\r\n        </Row>\r\n\r\n        <video ref={this.localVideo} width='0' height='0' autoPlay muted />\r\n        <video ref={this.remoteVideo} width='0' height='0' autoPlay />\r\n\r\n      </Container >\r\n    );\r\n  }\r\n\r\n  initialize = async () => {\r\n    socket.on('webrtc', (data) => this.receiveData(JSON.parse(data)));\r\n\r\n    const mediaConstraints = {\r\n      'audio': false,\r\n      'video': {\r\n        'width': 640,\r\n        'height': 480\r\n      }\r\n    };\r\n\r\n    const pcConfiguration = {\r\n      'iceServers': [\r\n        { 'urls': 'stun:stun.l.google.com:19302' }\r\n      ]\r\n    };\r\n\r\n    const stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\r\n\r\n    this.pc = new RTCPeerConnection(pcConfiguration);\r\n\r\n    this.localVideo.current.srcObject = stream;\r\n\r\n    this.pc.addStream(stream);\r\n\r\n    this.pc.onicecandidate = (event) => {\r\n      if (event.candidate) {\r\n        this.sendData(event.candidate);\r\n      }\r\n    };\r\n\r\n    this.pc.onaddstream = (event) => {\r\n      this.remoteVideo.current.srcObject = event.stream;\r\n\r\n      this.remoteVideo.current.addEventListener('play', this.detectFace());\r\n    };\r\n\r\n    this.pc.oniceconnectionstatechange = () => {\r\n      console.log(this.pc ? this.pc.iceConnectionState : '...');\r\n    };\r\n  };\r\n\r\n  uninitialize = async () => {\r\n    socket.off('webrtc');\r\n  };\r\n\r\n  call = async () => {\r\n    const offer = await this.pc.createOffer();\r\n\r\n    await this.pc.setLocalDescription(offer);\r\n\r\n    this.sendData(offer);\r\n  };\r\n\r\n  sendData = async (data) => {\r\n    socket.emit('webrtc', JSON.stringify(data));\r\n  };\r\n\r\n  receiveData = async (data) => {\r\n    if (data['type'] === undefined) {\r\n      this.pc.addIceCandidate(data);\r\n    }\r\n    else if (data['type'] === 'offer') {\r\n      await this.pc.setRemoteDescription(data);\r\n\r\n      const answer = await this.pc.createAnswer();\r\n\r\n      await this.pc.setLocalDescription(answer);\r\n\r\n      this.sendData(answer);\r\n    }\r\n    else if (data['type'] === 'answer') {\r\n      await this.pc.setRemoteDescription(data);\r\n    }\r\n  };\r\n\r\n  detectFace = async () => {\r\n    const _canvas = this.canvas.current;\r\n    const _video = this.remoteVideo.current;\r\n    const _ctx = _canvas.getContext('2d');\r\n\r\n    const frame = async () => {\r\n      const detections = await faceapi.detectAllFaces(_video, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\r\n\r\n      _ctx.clearRect(0, 0, _canvas.width, _canvas.height);\r\n      _ctx.drawImage(_video, 0, 0, _canvas.width, _canvas.height);\r\n\r\n      faceapi.draw.drawDetections(_canvas, detections);\r\n      faceapi.draw.drawFaceLandmarks(_canvas, detections);\r\n      faceapi.draw.drawFaceExpressions(_canvas, detections);\r\n    };\r\n\r\n    setInterval(frame, 100);\r\n  };\r\n}\r\n","import React from 'react';\nimport { Container, Row, Button } from 'reactstrap';\nimport { socket } from '../utils/sockets';\n\n//\"homepage\": \"https://nenzon-dev.github.io/webrtc-test\"\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.localVideo = React.createRef();\n    this.remoteVideo = React.createRef();\n    this.pc = null;\n  }\n\n  componentDidMount() {\n    this.initialize();\n  }\n\n  componentWillUnmount() {\n    this.uninitialize();\n  }\n\n  render() {\n    return (\n      <Container>\n        <Row>\n          <Button color='success' onClick={this.call}>Call</Button>\n          <Button color='danger' onClick={this.hangup}>Hangup</Button>\n        </Row>\n\n        <Row>\n          <video ref={this.localVideo} width='300' autoPlay muted />\n          <video ref={this.remoteVideo} width='300' autoPlay />\n        </Row>\n      </Container >\n    );\n  }\n\n  initialize = async () => {\n    socket.on('webrtc', (data) => this.receiveData(JSON.parse(data)));\n\n    const mediaConstraints = {\n      'audio': true,\n      'video': true\n    };\n\n    const pcConfiguration = {\n      'iceServers': [\n        { 'urls': 'stun:stun.l.google.com:19302' }\n      ]\n    };\n\n    const stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n\n    this.localVideo.current.srcObject = stream;\n\n    this.pc = new RTCPeerConnection(pcConfiguration);\n\n    this.pc.addStream(stream);\n\n    this.pc.onicecandidate = (event) => {\n      if (event.candidate) {\n        this.sendData(event.candidate);\n      }\n    };\n\n    this.pc.onaddstream = (event) => {\n      this.remoteVideo.current.srcObject = event.stream;\n    };\n\n    this.pc.oniceconnectionstatechange = () => {\n      console.log(this.pc ? this.pc.iceConnectionState : '...');\n    };\n  };\n\n  uninitialize = async () => {\n    socket.off('webrtc');\n  };\n\n  call = async () => {\n    const offer = await this.pc.createOffer();\n\n    await this.pc.setLocalDescription(offer);\n\n    this.sendData(offer);\n  };\n\n  hangup = async () => {\n    this.pc.close();\n    this.pc = null;\n\n    this.initialize();\n  };\n\n  sendData = async (data) => {\n    socket.emit('webrtc', JSON.stringify(data));\n  };\n\n  receiveData = async (data) => {\n    if (data['type'] === undefined) {\n      await this.pc.addIceCandidate(data);\n    }\n    else if (data['type'] === 'offer') {\n      await this.pc.setRemoteDescription(data);\n\n      const answer = await this.pc.createAnswer();\n\n      await this.pc.setLocalDescription(answer);\n\n      this.sendData(answer);\n    }\n    else if (data['type'] === 'answer') {\n      await this.pc.setRemoteDescription(data);\n    }\n  };\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\n\r\nimport Home from './pages/Home';\r\nimport P1 from './pages/P1';\r\nimport P2 from './pages/P2';\r\nimport WebRTCView from './pages/WebRTCView';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst App = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route path='/' exact component={Home} />\r\n        <Route path='/p1' component={P1} />\r\n        <Route path='/p2' component={P2} />\r\n        <Route path='/webrtc' component={WebRTCView} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}