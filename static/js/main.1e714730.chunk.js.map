{"version":3,"sources":["components/WebRTCView.js","App.js","index.js"],"names":["socket","io","_default","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","start","pc","RTCPeerConnection","iceServers","urls","onicecandidate","event","candidate","sendData","onaddstream","remoteVideo","current","srcObject","stream","navigator","mediaDevices","getUserMedia","audio","video","then","localVideo","addStream","asyncToGenerator","regenerator_default","a","mark","_callee","offer","wrap","_context","prev","next","createOffer","sent","setLocalDescription","sdp","localDescription","stop","hangup","_callee2","_context2","close","_ref3","_callee3","data","_context3","emit","JSON","stringify","_x","apply","arguments","receiveData","_ref4","_callee4","answer","_context4","undefined","addIceCandidate","RTCIceCandidate","type","setRemoteDescription","RTCSessionDescription","createAnswer","_x2","React","createRef","_this2","on","parse","react_default","createElement","react","View","style","flexDirection","justifyContent","alignItems","margin","Button","title","onPress","width","ref","autoPlay","muted","Component","flex","WebRTCView_default","AppRegistry","registerComponent","App","runApplication","rootTag","document","getElementById"],"mappings":"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","file":"static/js/main.1e714730.chunk.js","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { View, Button } from 'react-native';\n\nimport io from 'socket.io-client';\n\nconst socket = io('https://vvk954yznl.sse.codesandbox.io/');\n//socket.on('connect', () => console.log('connect'));\n\nexport default class extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.localVideo = React.createRef();\n\t\tthis.remoteVideo = React.createRef();\n\n\t\tthis.pc = null;\n\t}\n\n\tcomponentDidMount() {\n\t\tsocket.on('x', (data) => this.receiveData(JSON.parse(data)));\n\n\t\tthis.start();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center', margin: 10 }}>\n\t\t\t\t\t<Button title='Call' onPress={this.call} />\n\t\t\t\t\t<View style={{ width: 10 }} />\n\t\t\t\t\t<Button title='Hangup' onPress={this.hangup} />\n\t\t\t\t</View>\n\n\t\t\t\t<View style={{ justifyContent: 'center', alignItems: 'center' }}>\n\t\t\t\t\t<video ref={this.localVideo} width='300' autoPlay muted />\n\n\t\t\t\t\t<video ref={this.remoteVideo} width='300' autoPlay />\n\t\t\t\t</View>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tstart = () => {\n\t\tconst configuration = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };\n\n\t\tthis.pc = new RTCPeerConnection(configuration);\n\n\t\tthis.pc.onicecandidate = (event) => {\n\t\t\tif (event.candidate) {\n\t\t\t\tthis.sendData({ candidate: event.candidate });\n\t\t\t}\n\t\t};\n\n\t\tthis.pc.onaddstream = (event) => {\n\t\t\tthis.remoteVideo.current.srcObject = event.stream;\n\t\t};\n\n\t\t//this.pc.oniceconnectionstatechange = (event) => console.log(this.pc.iceConnectionState);\n\n\t\tnavigator.mediaDevices.getUserMedia({ 'audio': true, 'video': true }).then((stream) => {\n\t\t\tthis.localVideo.current.srcObject = stream;\n\n\t\t\tthis.pc.addStream(stream);\n\t\t});\n\t};\n\n\tcall = async () => {\n\t\tconst offer = await this.pc.createOffer();\n\n\t\tawait this.pc.setLocalDescription(offer);\n\n\t\tthis.sendData({ sdp: this.pc.localDescription });\n\t};\n\n\thangup = async () => {\n\t\tthis.pc.close();\n\t\tthis.pc = null;\n\n\t\tthis.start();\n\t};\n\n\tsendData = async (data) => {\n\t\tsocket.emit('x', JSON.stringify(data));\n\t};\n\n\treceiveData = async (data) => {\n\t\tif (data.candidate !== undefined) {\n\t\t\tthis.pc.addIceCandidate(new RTCIceCandidate(data.candidate));\n\t\t}\n\t\telse if (data.sdp.type === 'offer') {\n\t\t\tthis.pc.setRemoteDescription(new RTCSessionDescription(data.sdp));\n\n\t\t\tconst answer = await this.pc.createAnswer();\n\n\t\t\tawait this.pc.setLocalDescription(answer);\n\n\t\t\tthis.sendData({ sdp: this.pc.localDescription });\n\t\t}\n\t\telse if (data.sdp.type === 'answer') {\n\t\t\tthis.pc.setRemoteDescription(new RTCSessionDescription(data.sdp));\n\t\t}\n\t};\n}\n","import React, { Component } from 'react';\nimport { View } from 'react-native';\n\nimport WebRTCView from './components/WebRTCView'\n\n//import './main.css';\n\nexport default class extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n\t\t\t\t<WebRTCView />\n\t\t\t</View>\n\t\t);\n\t}\n}\n","import { AppRegistry } from 'react-native';\n\nimport App from './App';\n\nAppRegistry.registerComponent('app', () => App);\nAppRegistry.runApplication('app', { rootTag: document.getElementById('root') });\n"],"sourceRoot":""}